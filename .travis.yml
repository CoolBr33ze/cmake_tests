os:
  - linux
  - osx
  - windows

language: cpp

sudo: false
dist: trusty
osx_image: xcode7

addons:
  apt:
    packages:
    - xorg-dev
    - libglu1-mesa-dev
    - mesa-common-dev
    - mesa-utils-extra
    - libgl1-mesa-dev
    - libglu1-mesa-dev
    - libglapi-mesa
    - libxi-dev
    - libxinerama-dev
    - libxcursor-dev
    - libxrandr-dev

before_install:

install:

script:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then set -e;
    fi
  - echo "Building the library...";
  - mkdir build && cd build;
  - cmake .. -DBUILD_SHARED_LIBS=true;
  - cmake --build .;
  - echo "Running Unit-Tests...";
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then
      cp ./Debug/fractal.dll ./test/Debug/;
      ./test/Debug/unit-tests.exe;
    else ./test/unit-tests;
    fi
